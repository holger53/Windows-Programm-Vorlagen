<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:h="clr-namespace:PtoP_Windows_Urversion.Helpers"
                    xmlns:b="clr-namespace:PtoP_Windows_Urversion.Base">

    <!-- ===== Color Tokens ===== -->
    <Color x:Key="Color.Background">#FFF6F7F9</Color>
    <Color x:Key="Color.Surface">#FFFFFFFF</Color>
    <Color x:Key="Color.Border">#FFE3E6EA</Color>

    <Color x:Key="Color.TextPrimary">#FF111827</Color>
    <Color x:Key="Color.TextSecondary">#FF4B5563</Color>

    <Color x:Key="Color.Accent">#FF93C5FD</Color>
    <Color x:Key="Color.AccentHover">#FF60A5FA</Color>
    <Color x:Key="Color.AccentPressed">#FF3B82F6</Color>

    <Color x:Key="Color.Disabled">#FFC0C5CC</Color>

    <!-- Danger -->
    <Color x:Key="Color.Danger">#FFFCA5A5</Color>
    <Color x:Key="Color.DangerHover">#FFF87171</Color>
    <Color x:Key="Color.DangerPressed">#FFEF4444</Color>

    <!-- ListBox -->
    <Color x:Key="Color.ListBackground">#FFFFFDE7</Color>
    <Color x:Key="Color.ListItemHover">#FFFFF9C4</Color>
    <Color x:Key="Color.ListItemSelected">#FFFFF176</Color>

    <!-- Toggle / Success (Gruen) -->
    <Color x:Key="Color.Success">#FF86EFAC</Color>
    <Color x:Key="Color.SuccessHover">#FF4ADE80</Color>
    <Color x:Key="Color.SuccessPressed">#FF22C55E</Color>

    <!-- Toggle Unchecked (Blass-Grau) -->
    <Color x:Key="Color.ToggleOff">#FFD6D9DE</Color>
    <Color x:Key="Color.ToggleOffHover">#FFBFC4CB</Color>

    <!-- Button Panel -->
    <Color x:Key="Color.ButtonPanel">#FFD4D7DC</Color>

    <!-- ===== Brushes ===== -->
    <SolidColorBrush x:Key="Brush.Background" Color="{StaticResource Color.Background}" />
    <SolidColorBrush x:Key="Brush.Surface" Color="{StaticResource Color.Surface}" />
    <SolidColorBrush x:Key="Brush.Border" Color="{StaticResource Color.Border}" />

    <SolidColorBrush x:Key="Brush.TextPrimary" Color="{StaticResource Color.TextPrimary}" />
    <SolidColorBrush x:Key="Brush.TextSecondary" Color="{StaticResource Color.TextSecondary}" />

    <SolidColorBrush x:Key="Brush.Accent" Color="{StaticResource Color.Accent}" />
    <SolidColorBrush x:Key="Brush.AccentHover" Color="{StaticResource Color.AccentHover}" />
    <SolidColorBrush x:Key="Brush.AccentPressed" Color="{StaticResource Color.AccentPressed}" />

    <SolidColorBrush x:Key="Brush.Disabled" Color="{StaticResource Color.Disabled}" />

    <SolidColorBrush x:Key="Brush.Danger" Color="{StaticResource Color.Danger}" />
    <SolidColorBrush x:Key="Brush.DangerHover" Color="{StaticResource Color.DangerHover}" />
    <SolidColorBrush x:Key="Brush.DangerPressed" Color="{StaticResource Color.DangerPressed}" />

    <SolidColorBrush x:Key="Brush.ListBackground" Color="{StaticResource Color.ListBackground}" />
    <SolidColorBrush x:Key="Brush.ListItemHover" Color="{StaticResource Color.ListItemHover}" />
    <SolidColorBrush x:Key="Brush.ListItemSelected" Color="{StaticResource Color.ListItemSelected}" />

    <SolidColorBrush x:Key="Brush.Success" Color="{StaticResource Color.Success}" />
    <SolidColorBrush x:Key="Brush.SuccessHover" Color="{StaticResource Color.SuccessHover}" />
    <SolidColorBrush x:Key="Brush.SuccessPressed" Color="{StaticResource Color.SuccessPressed}" />

    <SolidColorBrush x:Key="Brush.ToggleOff" Color="{StaticResource Color.ToggleOff}" />
    <SolidColorBrush x:Key="Brush.ToggleOffHover" Color="{StaticResource Color.ToggleOffHover}" />

    <SolidColorBrush x:Key="Brush.ButtonPanel" Color="{StaticResource Color.ButtonPanel}" />

    <!-- ===== 3D Gradient Brushes ===== -->

    <!-- Danger -->
    <LinearGradientBrush x:Key="BtnBg.Danger" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#66FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.Danger}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.DangerHover}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.DangerHover" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#77FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.DangerHover}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.DangerPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.DangerPressed" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#55FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.DangerPressed}" Offset="0.65"/>
        <GradientStop Color="{StaticResource Color.DangerPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <!-- Normal -->
    <LinearGradientBrush x:Key="BtnBg.Normal" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#66FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.Accent}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.AccentHover}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.Hover" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#77FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.AccentHover}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.AccentPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.Pressed" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#55FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.AccentPressed}" Offset="0.65"/>
        <GradientStop Color="{StaticResource Color.AccentPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <!-- Toggle Unchecked (grau, erhaben) -->
    <LinearGradientBrush x:Key="BtnBg.ToggleOff" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#66FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.ToggleOff}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.ToggleOffHover}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.ToggleOffHover" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#77FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.ToggleOffHover}" Offset="0.55"/>
        <GradientStop Color="#FFAEB3BA" Offset="1.0"/>
    </LinearGradientBrush>

    <!-- Toggle Checked (gruen, eingedrueckt – umgekehrter Gradient fuer "sunken" Look) -->
    <LinearGradientBrush x:Key="BtnBg.Checked" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#66FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.Success}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.SuccessHover}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.CheckedHover" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#77FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.SuccessHover}" Offset="0.55"/>
        <GradientStop Color="{StaticResource Color.SuccessPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <LinearGradientBrush x:Key="BtnBg.SuccessPressed" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#55FFFFFF" Offset="0.0"/>
        <GradientStop Color="{StaticResource Color.SuccessPressed}" Offset="0.65"/>
        <GradientStop Color="{StaticResource Color.SuccessPressed}" Offset="1.0"/>
    </LinearGradientBrush>

    <!-- ===== Button Styles ===== -->

    <!-- 3D / Bevel Button (explicit key) -->
    <Style x:Key="BaseButton" TargetType="Button">
        <Setter Property="Height" Value="50"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Background" Value="{StaticResource BtnBg.Normal}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.AccentPressed}"/>
        <Setter Property="Cursor" Value="Hand"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="10"
                            Padding="6"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Border x:Name="ShadowHost" CornerRadius="6" Background="Transparent">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10"
                                                      ShadowDepth="2"
                                                      Opacity="0.28"/>
                                </Border.Effect>
                            </Border>

                            <Border x:Name="Body"
                                    CornerRadius="6"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Border x:Name="Highlight"
                                            Margin="1"
                                            CornerRadius="5"
                                            VerticalAlignment="Top"
                                            Height="12"
                                            Opacity="0.35">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      TextElement.Foreground="{TemplateBinding Foreground}">
                                        <ContentPresenter.RenderTransform>
                                            <TranslateTransform Y="-1"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Hover}"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.45"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Pressed}"/>
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0.15"/>
                            <Setter TargetName="Body" Property="RenderTransform">
                                <Setter.Value>
                                    <TranslateTransform Y="1"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.18"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Implicit default button style -->
    <Style TargetType="Button" BasedOn="{StaticResource BaseButton}"/>

    <!-- Danger / Exit Button -->
    <Style x:Key="DangerButton" TargetType="Button">
        <Setter Property="Height" Value="50"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Background" Value="{StaticResource BtnBg.ToggleOff}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.ToggleOffHover}"/>
        <Setter Property="Cursor" Value="Hand"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="10"
                            Padding="6"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Border x:Name="ShadowHost" CornerRadius="6" Background="Transparent">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10"
                                                      ShadowDepth="2"
                                                      Opacity="0.28"/>
                                </Border.Effect>
                            </Border>

                            <Border x:Name="Body"
                                    CornerRadius="6"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Border x:Name="Highlight"
                                            Margin="1"
                                            CornerRadius="5"
                                            VerticalAlignment="Top"
                                            Height="12"
                                            Opacity="0.35">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      TextElement.Foreground="{TemplateBinding Foreground}">
                                        <ContentPresenter.RenderTransform>
                                            <TranslateTransform Y="-1"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Danger}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.DangerPressed}"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.45"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.DangerPressed}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.DangerPressed}"/>
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0.15"/>
                            <Setter TargetName="Body" Property="RenderTransform">
                                <Setter.Value>
                                    <TranslateTransform Y="1"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.18"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Secondary / Outline Button -->
    <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
    </Style>

    <!-- Cancel / Abbrechen Button (blassrot bei Hover/Press) -->
    <Style x:Key="CancelButton" TargetType="Button">
        <Setter Property="Height" Value="50"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="Cursor" Value="Hand"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="10"
                            Padding="6"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Border x:Name="ShadowHost" CornerRadius="6" Background="Transparent">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10"
                                                      ShadowDepth="2"
                                                      Opacity="0.28"/>
                                </Border.Effect>
                            </Border>

                            <Border x:Name="Body"
                                    CornerRadius="6"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Border x:Name="Highlight"
                                            Margin="1"
                                            CornerRadius="5"
                                            VerticalAlignment="Top"
                                            Height="12"
                                            Opacity="0.35">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      TextElement.Foreground="{TemplateBinding Foreground}">
                                        <ContentPresenter.RenderTransform>
                                            <TranslateTransform Y="-1"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Danger}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.DangerPressed}"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.45"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.DangerHover}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.DangerPressed}"/>
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0.15"/>
                            <Setter TargetName="Body" Property="RenderTransform">
                                <Setter.Value>
                                    <TranslateTransform Y="1"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.18"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Save / Speichern Button (grau neutral, gruen bei Hover/Press) -->
    <Style x:Key="SaveButton" TargetType="Button">
        <Setter Property="Height" Value="50"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Background" Value="{StaticResource BtnBg.ToggleOff}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.ToggleOffHover}"/>
        <Setter Property="Cursor" Value="Hand"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="10"
                            Padding="6"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Border x:Name="ShadowHost" CornerRadius="6" Background="Transparent">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10"
                                                      ShadowDepth="2"
                                                      Opacity="0.28"/>
                                </Border.Effect>
                            </Border>

                            <Border x:Name="Body"
                                    CornerRadius="6"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Border x:Name="Highlight"
                                            Margin="1"
                                            CornerRadius="5"
                                            VerticalAlignment="Top"
                                            Height="12"
                                            Opacity="0.35">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      TextElement.Foreground="{TemplateBinding Foreground}">
                                        <ContentPresenter.RenderTransform>
                                            <TranslateTransform Y="-1"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Checked}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.SuccessPressed}"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.45"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.SuccessPressed}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.SuccessPressed}"/>
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0.15"/>
                            <Setter TargetName="Body" Property="RenderTransform">
                                <Setter.Value>
                                    <TranslateTransform Y="1"/>
                                </Setter.Value>
                            </Setter>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.18"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== ToggleButton (3D Bevel, zwei Zustaende) ===== -->

    <Style x:Key="BaseToggleButton" TargetType="ToggleButton">
        <Setter Property="Height" Value="50"/>
        <Setter Property="Padding" Value="16,8"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="FontWeight" Value="Normal"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="Background" Value="{StaticResource BtnBg.ToggleOff}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.ToggleOffHover}"/>
        <Setter Property="Cursor" Value="Hand"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ToggleButton">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="10"
                            Padding="6"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Border x:Name="ShadowHost" CornerRadius="6" Background="Transparent">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="10"
                                                      ShadowDepth="2"
                                                      Opacity="0.28"/>
                                </Border.Effect>
                            </Border>

                            <Border x:Name="Body"
                                    CornerRadius="6"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}">
                                <Grid>
                                    <Border x:Name="Highlight"
                                            Margin="1"
                                            CornerRadius="5"
                                            VerticalAlignment="Top"
                                            Height="12"
                                            Opacity="0.35">
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                <GradientStop Color="#FFFFFFFF" Offset="0"/>
                                                <GradientStop Color="#00FFFFFF" Offset="1"/>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>

                                    <ContentPresenter Margin="{TemplateBinding Padding}"
                                                      HorizontalAlignment="Center"
                                                      VerticalAlignment="Center"
                                                      TextElement.Foreground="{TemplateBinding Foreground}">
                                        <ContentPresenter.RenderTransform>
                                            <TranslateTransform Y="-1"/>
                                        </ContentPresenter.RenderTransform>
                                    </ContentPresenter>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <!-- Hover (nicht gecheckt) -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsChecked" Value="False"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" Value="{StaticResource BtnBg.ToggleOffHover}"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0.45"/>
                        </MultiTrigger>

                        <!-- Gecheckt (erhaben, gruen) -->
                        <Trigger Property="IsChecked" Value="True">
                            <Setter Property="Background" Value="{StaticResource BtnBg.Checked}"/>
                            <Setter Property="Foreground" Value="White"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.SuccessPressed}"/>
                        </Trigger>

                        <!-- Hover (gecheckt) -->
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="True"/>
                                <Condition Property="IsChecked" Value="True"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="Background" Value="{StaticResource BtnBg.CheckedHover}"/>
                        </MultiTrigger>

                        <!-- Disabled -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="ShadowHost" Property="Opacity" Value="0"/>
                            <Setter TargetName="Highlight" Property="Opacity" Value="0"/>
                            <Setter Property="Background" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="BorderBrush" Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Implicit default ToggleButton style -->
    <Style TargetType="ToggleButton" BasedOn="{StaticResource BaseToggleButton}"/>

    <!-- ===== CheckBox (auf grauem Panel) ===== -->
    <Style TargetType="CheckBox">
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Padding" Value="8,0,0,0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <Border x:Name="PanelHost"
                            Background="{StaticResource Brush.ButtonPanel}"
                            CornerRadius="6"
                            Padding="10,8"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Check-Box -->
                            <Border x:Name="CheckBorder"
                                    Width="20" Height="20"
                                    CornerRadius="4"
                                    Background="{StaticResource Brush.Surface}"
                                    BorderBrush="{StaticResource Brush.Border}"
                                    BorderThickness="1.5"
                                    VerticalAlignment="Center">
                                <Grid>
                                    <!-- Haken -->
                                    <TextBlock x:Name="CheckMark"
                                               Text="✓"
                                               FontSize="14"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource Brush.AccentPressed}"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Margin="0,-2,0,0"
                                               Visibility="Collapsed"/>
                                </Grid>
                            </Border>

                            <!-- Label -->
                            <ContentPresenter Grid.Column="1"
                                              Margin="{TemplateBinding Padding}"
                                              VerticalAlignment="Center"
                                              RecognizesAccessKey="True"/>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="CheckBorder" Property="BorderBrush"
                                    Value="{StaticResource Brush.AccentPressed}"/>
                            <Setter TargetName="CheckBorder" Property="Background"
                                    Value="{StaticResource Brush.Accent}"/>
                            <Setter TargetName="CheckMark" Property="Foreground" Value="White"/>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="CheckBorder" Property="BorderBrush"
                                    Value="{StaticResource Brush.AccentHover}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="CheckBorder" Property="Background"
                                    Value="{StaticResource Brush.Disabled}"/>
                            <Setter TargetName="CheckBorder" Property="BorderBrush"
                                    Value="{StaticResource Brush.Disabled}"/>
                            <Setter Property="Foreground"
                                    Value="{StaticResource Brush.Disabled}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== ListBox ===== -->
    <Style TargetType="ListBox">
        <Setter Property="Background" Value="{StaticResource Brush.ListBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="Padding" Value="4"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
    </Style>

    <!-- ===== ListBoxItem ===== -->
    <Style TargetType="ListBoxItem">
        <Setter Property="Padding" Value="8,6"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Border x:Name="ItemBorder"
                            Background="{TemplateBinding Background}"
                            CornerRadius="4"
                            Padding="{TemplateBinding Padding}"
                            Margin="0,1">
                        <ContentPresenter/>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="ItemBorder" Property="Background"
                                    Value="{StaticResource Brush.ListItemHover}"/>
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="ItemBorder" Property="Background"
                                    Value="{StaticResource Brush.ListItemSelected}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== Window Chrome ===== -->

    <!-- Caption Button (Minimieren / Maximieren) -->
    <Style x:Key="CaptionButton" TargetType="Button">
        <Setter Property="Width" Value="46"/>
        <Setter Property="Height" Value="32"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bg" Background="Transparent">
                        <ContentPresenter HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          TextElement.Foreground="{StaticResource Brush.TextPrimary}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bg" Property="Background" Value="#19000000"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Bg" Property="Background" Value="#33000000"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Caption Close Button (Rot bei Hover) -->
    <Style x:Key="CaptionCloseButton" TargetType="Button">
        <Setter Property="Width" Value="46"/>
        <Setter Property="Height" Value="32"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bg" Background="Transparent">
                        <ContentPresenter x:Name="Content"
                                          HorizontalAlignment="Center"
                                          VerticalAlignment="Center"
                                          TextElement.Foreground="{StaticResource Brush.TextPrimary}"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Bg" Property="Background"
                                    Value="{StaticResource Brush.Danger}"/>
                            <Setter TargetName="Content" Property="TextElement.Foreground"
                                    Value="White"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Bg" Property="Background"
                                    Value="{StaticResource Brush.DangerPressed}"/>
                            <Setter TargetName="Content" Property="TextElement.Foreground"
                                    Value="White"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Caption Help Button (Blauer Kreis mit Fragezeichen) -->
    <Style x:Key="CaptionHelpButton" TargetType="Button">
        <Setter Property="Width" Value="46"/>
        <Setter Property="Height" Value="40"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="ToolTip" Value="Hilfe"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="Bg" Background="Transparent">
                        <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
                            <Ellipse x:Name="Circle" Width="22" Height="22"
                                     Fill="{StaticResource Brush.AccentHover}"/>
                            <TextBlock Text="?" FontSize="13" FontWeight="SemiBold"
                                       Foreground="White"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="Circle" Property="Fill"
                                    Value="{StaticResource Brush.AccentPressed}"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter TargetName="Circle" Property="Fill">
                                <Setter.Value>
                                    <SolidColorBrush Color="#FF2563EB"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== BooleanToVisibilityConverter ===== -->
    <BooleanToVisibilityConverter x:Key="BoolToVis"/>

    <!-- ===== ContextMenu ===== -->
    <Style TargetType="{x:Type ContextMenu}">
        <Setter Property="Background" Value="{StaticResource Brush.Surface}"/>
        <Setter Property="BorderBrush" Value="{StaticResource Brush.Border}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="2"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="13"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="HasDropShadow" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ContextMenu}">
                    <Border x:Name="Border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}"
                            SnapsToDevicePixels="True">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="12" ShadowDepth="4"
                                              Opacity="0.15" Color="Black"/>
                        </Border.Effect>
                        <StackPanel IsItemsHost="True"
                                    KeyboardNavigation.DirectionalNavigation="Cycle"/>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== MenuItem ===== -->
    <Style TargetType="{x:Type MenuItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
        <Setter Property="Padding" Value="10,6"/>
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type MenuItem}">
                    <Border x:Name="Bg"
                            Background="{TemplateBinding Background}"
                            CornerRadius="4"
                            Padding="{TemplateBinding Padding}"
                            Margin="2,1"
                            SnapsToDevicePixels="True">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Icon"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut"/>
                            </Grid.ColumnDefinitions>

                            <ContentPresenter x:Name="Icon"
                                              Grid.Column="0"
                                              ContentSource="Icon"
                                              Width="16" Height="16"
                                              Margin="0,0,8,0"
                                              VerticalAlignment="Center"
                                              SnapsToDevicePixels="True"/>

                            <ContentPresenter Grid.Column="1"
                                              ContentSource="Header"
                                              RecognizesAccessKey="True"
                                              VerticalAlignment="Center"/>

                            <TextBlock x:Name="Gesture"
                                       Grid.Column="2"
                                       Text="{TemplateBinding InputGestureText}"
                                       Foreground="{StaticResource Brush.TextSecondary}"
                                       FontSize="12"
                                       Margin="24,0,0,0"
                                       VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter TargetName="Icon" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="InputGestureText" Value="">
                            <Setter TargetName="Gesture" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                        <Trigger Property="IsHighlighted" Value="True">
                            <Setter TargetName="Bg" Property="Background"
                                    Value="{StaticResource Brush.Accent}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Foreground"
                                    Value="{StaticResource Brush.Disabled}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- ===== Separator (fuer ContextMenu) ===== -->
    <Style TargetType="{x:Type Separator}">
        <Setter Property="Height" Value="1"/>
        <Setter Property="Margin" Value="6,4"/>
        <Setter Property="Background" Value="{StaticResource Brush.Border}"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Separator}">
                    <Border Background="{TemplateBinding Background}"
                            Height="{TemplateBinding Height}"
                            Margin="{TemplateBinding Margin}"
                            SnapsToDevicePixels="True"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- PtoP Window Style (eigene Titelleiste) -->
    <Style x:Key="PtoPWindow" TargetType="Window">
        <Setter Property="Background" Value="{StaticResource Brush.Background}"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="h:WindowHelper.EnableCustomChrome" Value="True"/>
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome CaptionHeight="40"
                              ResizeBorderThickness="6"
                              GlassFrameThickness="0"
                              UseAeroCaptionButtons="False"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Window">
                    <Border x:Name="WindowBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Titelleiste -->
                                            <Border Grid.Row="0"
                                                    Background="{StaticResource Brush.ButtonPanel}"
                                                    BorderBrush="{StaticResource Brush.Border}"
                                                    BorderThickness="0,0,0,1">
                                                <Grid>
                                                    <TextBlock Text="{TemplateBinding Title}"
                                                               VerticalAlignment="Center"
                                                               Margin="14,0,0,0"
                                                               FontSize="13"
                                                               Foreground="{StaticResource Brush.TextPrimary}"/>

                                                    <StackPanel Orientation="Horizontal"
                                                                HorizontalAlignment="Right"
                                                                VerticalAlignment="Top">
                                                        <!-- Minimieren -->
                                                        <Button Style="{StaticResource CaptionButton}"
                                                                Command="{x:Static SystemCommands.MinimizeWindowCommand}">
                                                            <TextBlock FontFamily="Segoe MDL2 Assets"
                                                                       FontSize="10" Text="&#xE921;"/>
                                                        </Button>

                                                        <!-- Maximieren / Wiederherstellen -->
                                                        <Button x:Name="MaxBtn"
                                                                Style="{StaticResource CaptionButton}"
                                                                Command="{x:Static SystemCommands.MaximizeWindowCommand}">
                                                            <TextBlock x:Name="MaxIcon"
                                                                       FontFamily="Segoe MDL2 Assets"
                                                                       FontSize="10" Text="&#xE922;"/>
                                                        </Button>

                                                        <!-- Schließen (rot bei Hover) -->
                                                        <Button Style="{StaticResource CaptionCloseButton}"
                                                                Command="{x:Static SystemCommands.CloseWindowCommand}">
                                                            <TextBlock FontFamily="Segoe MDL2 Assets"
                                                                       FontSize="10" Text="&#xE8BB;"/>
                                                        </Button>
                                                    </StackPanel>
                                                </Grid>
                                            </Border>

                                                                                     <!-- Inhalt -->
                                                                                     <AdornerDecorator Grid.Row="1">
                                                                                         <ContentPresenter/>
                                                                                     </AdornerDecorator>

                                                                                     <!-- Hilfe-Button unter der Titelleiste rechts -->
                                                                                     <Button x:Name="HelpBtn"
                                                                                             Grid.Row="1"
                                                                                             Style="{StaticResource CaptionHelpButton}"
                                                                                             VerticalAlignment="Top"
                                                                                             HorizontalAlignment="Right"
                                                                                             Margin="0,0,0,0"/>
                                                                </Grid>
                                                            </Border>

                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="WindowState" Value="Maximized">
                                                                    <Setter TargetName="MaxBtn" Property="Command"
                                                                            Value="{x:Static SystemCommands.RestoreWindowCommand}"/>
                                                                    <Setter TargetName="MaxIcon" Property="Text" Value="&#xE923;"/>
                                                                    <Setter TargetName="WindowBorder" Property="BorderThickness" Value="0"/>
                                                                    <Setter TargetName="WindowBorder" Property="Padding" Value="7"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>

    <!-- ===== PtoP Dialog Window (BaseWindow mit Button-Leiste) ===== -->
    <Style TargetType="{x:Type b:BaseWindow}" BasedOn="{x:Null}">
        <Setter Property="Background" Value="{StaticResource Brush.Background}"/>
        <Setter Property="FontFamily" Value="Segoe UI"/>
        <Setter Property="FontSize" Value="14"/>
        <Setter Property="h:WindowHelper.EnableCustomChrome" Value="True"/>
        <Setter Property="WindowChrome.WindowChrome">
            <Setter.Value>
                <WindowChrome CaptionHeight="40"
                              ResizeBorderThickness="6"
                              GlassFrameThickness="0"
                              UseAeroCaptionButtons="False"/>
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type b:BaseWindow}">
                    <Border x:Name="WindowBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{StaticResource Brush.Border}"
                            BorderThickness="1">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Titelleiste -->
                            <Border Grid.Row="0"
                                    Background="{StaticResource Brush.ButtonPanel}"
                                    BorderBrush="{StaticResource Brush.Border}"
                                    BorderThickness="0,0,0,1">
                                <Grid>
                                    <TextBlock Text="{TemplateBinding Title}"
                                               VerticalAlignment="Center"
                                               Margin="14,0,0,0"
                                               FontSize="13"
                                               Foreground="{StaticResource Brush.TextPrimary}"/>

                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top">
                                        <Button Style="{StaticResource CaptionButton}"
                                                Command="{x:Static SystemCommands.MinimizeWindowCommand}">
                                            <TextBlock FontFamily="Segoe MDL2 Assets"
                                                       FontSize="10" Text="&#xE921;"/>
                                        </Button>
                                        <Button x:Name="MaxBtn"
                                                Style="{StaticResource CaptionButton}"
                                                Command="{x:Static SystemCommands.MaximizeWindowCommand}">
                                            <TextBlock x:Name="MaxIcon"
                                                       FontFamily="Segoe MDL2 Assets"
                                                       FontSize="10" Text="&#xE922;"/>
                                        </Button>
                                        <Button Style="{StaticResource CaptionCloseButton}"
                                                Command="{x:Static SystemCommands.CloseWindowCommand}">
                                            <TextBlock FontFamily="Segoe MDL2 Assets"
                                                       FontSize="10" Text="&#xE8BB;"/>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Inhalt -->
                            <AdornerDecorator Grid.Row="1">
                                <ContentPresenter Margin="24"/>
                            </AdornerDecorator>

                            <!-- Hilfe-Button unter der Titelleiste rechts -->
                            <Button x:Name="HelpBtn"
                                    Grid.Row="1"
                                    Style="{StaticResource CaptionHelpButton}"
                                    VerticalAlignment="Top"
                                    HorizontalAlignment="Right"
                                    Margin="0,0,0,0"/>

                            <!-- Button-Leiste -->
                            <Border Grid.Row="2"
                                    Background="{StaticResource Brush.ButtonPanel}"
                                    BorderBrush="{StaticResource Brush.Border}"
                                    BorderThickness="1"
                                    CornerRadius="10"
                                    Padding="16,6"
                                    Margin="24,4,24,8"
                                    Visibility="{TemplateBinding ShowButtonBar, Converter={StaticResource BoolToVis}}">
                                <Grid>
                                    <!-- Löschen links -->
                                    <Button Content="{TemplateBinding DeleteButtonText}"
                                            Command="{TemplateBinding DeleteCommand}"
                                            ToolTip="{TemplateBinding DeleteButtonToolTip}"
                                            Style="{StaticResource DangerButton}"
                                            HorizontalAlignment="Left"
                                            MinWidth="120"
                                            Visibility="{TemplateBinding ShowDeleteButton, Converter={StaticResource BoolToVis}}"/>

                                    <!-- OK / Abbrechen rechts -->
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Right">
                                        <Button Content="{TemplateBinding OkButtonText}"
                                                Command="{TemplateBinding OkCommand}"
                                                ToolTip="{TemplateBinding OkButtonToolTip}"
                                                Style="{StaticResource SaveButton}"
                                                MinWidth="120"
                                                Margin="0,0,12,0"
                                                Visibility="{TemplateBinding ShowOkButton, Converter={StaticResource BoolToVis}}"/>
                                        <Button Content="{TemplateBinding CancelButtonText}"
                                                Command="{TemplateBinding CancelCommand}"
                                                ToolTip="{TemplateBinding CancelButtonToolTip}"
                                                Style="{StaticResource CancelButton}"
                                                MinWidth="120"
                                                Visibility="{TemplateBinding ShowCancelButton, Converter={StaticResource BoolToVis}}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </Grid>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="WindowState" Value="Maximized">
                            <Setter TargetName="MaxBtn" Property="Command"
                                    Value="{x:Static SystemCommands.RestoreWindowCommand}"/>
                            <Setter TargetName="MaxIcon" Property="Text" Value="&#xE923;"/>
                            <Setter TargetName="WindowBorder" Property="BorderThickness" Value="0"/>
                            <Setter TargetName="WindowBorder" Property="Padding" Value="7"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type TextBlock}">
        <Setter Property="Foreground" Value="{StaticResource Brush.TextPrimary}"/>
    </Style>

</ResourceDictionary>
